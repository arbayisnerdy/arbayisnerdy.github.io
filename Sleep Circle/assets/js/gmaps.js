"use strict";(function(d,c){if(typeof exports==="object"){module.exports=c()}else{if(typeof define==="function"&&define.amd){define(["jquery","googlemaps!"],c)}else{d.GMaps=c()}}}(this,function(){var r=function(c,b){var a;if(c===b){return c}for(a in b){if(b[a]!==undefined){c[a]=b[a]}}return c};var w=function(b,c){var a;if(b===c){return b}for(a in c){if(b[a]!=undefined){b[a]=c[a]}}return b};var o=function(a,d){var g=Array.prototype.slice.call(arguments,2),c=[],b=a.length,f;if(Array.prototype.map&&a.map===Array.prototype.map){c=Array.prototype.map.call(a,function(i){var h=g.slice(0);h.splice(0,0,i);return d.apply(this,h)})}else{for(f=0;f<b;f++){callback_params=g;callback_params.splice(0,0,a[f]);c.push(d.apply(this,callback_params))}}return c};var n=function(a){var c=[],b;for(b=0;b<a.length;b++){c=c.concat(a[b])}return c};var q=function(a,d){var b=a[0],c=a[1];if(d){b=a[1];c=a[0]}return new google.maps.LatLng(b,c)};var p=function(a,c){var b;for(b=0;b<a.length;b++){if(!(a[b] instanceof google.maps.LatLng)){if(a[b].length>0&&typeof(a[b][0])==="object"){a[b]=p(a[b],c)}else{a[b]=q(a[b],c)}}}return a};var u=function(b,c){var d,a=b.replace(".","");if("jQuery" in this&&c){d=$("."+a,c)[0]}else{d=document.getElementsByClassName(a)[0]}return d};var t=function(c,a){var b,c=c.replace("#","");if("jQuery" in window&&a){b=$("#"+c,a)[0]}else{b=document.getElementById(c)}return b};var s=function(c){var a=0,b=0;if(c.getBoundingClientRect){var d=c.getBoundingClientRect();var f=-(window.scrollX?window.scrollX:window.pageXOffset);var g=-(window.scrollY?window.scrollY:window.pageYOffset);return[(d.left-f),(d.top-g)]}if(c.offsetParent){do{a+=c.offsetLeft;b+=c.offsetTop}while(c=c.offsetParent)}return[a,b]};var v=(function(b){var a=document;var c=function(k){if(!(typeof window.google==="object"&&window.google.maps)){if(typeof window.console==="object"&&window.console.error){console.error("Google Maps API is required. Please register the following JavaScript library https://maps.googleapis.com/maps/api/js.")}return function(){}}if(!this){return new c(k)}k.zoom=k.zoom||15;k.mapType=k.mapType||"roadmap";var Y=function(A,z){return A===undefined?z:A};var V=this,ah,ag=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","idle","maptypeid_changed","projection_changed","resize","tilesloaded","zoom_changed"],ae=["mousemove","mouseout","mouseover"],l=["el","lat","lng","mapType","width","height","markerClusterer","enableNewStyle"],ai=k.el||k.div,g=k.markerClusterer,d=google.maps.MapTypeId[k.mapType.toUpperCase()],ak=new google.maps.LatLng(k.lat,k.lng),Z=Y(k.zoomControl,true),ab=k.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},af=ab.style||"DEFAULT",ad=ab.position||"TOP_LEFT",T=Y(k.panControl,true),f=Y(k.mapTypeControl,true),U=Y(k.scaleControl,true),X=Y(k.streetViewControl,true),m=Y(m,true),am={},aj={zoom:this.zoom,center:ak,mapTypeId:d},al={panControl:T,zoomControl:Z,zoomControlOptions:{style:google.maps.ZoomControlStyle[af],position:google.maps.ControlPosition[ad]},mapTypeControl:f,scaleControl:U,streetViewControl:X,overviewMapControl:m};if(typeof(k.el)==="string"||typeof(k.div)==="string"){if(ai.indexOf("#")>-1){this.el=t(ai,k.context)}else{this.el=u.apply(this,[ai,k.context])}}else{this.el=ai}if(typeof(this.el)==="undefined"||this.el===null){throw"No element defined."}window.context_menu=window.context_menu||{};window.context_menu[V.el.id]={};this.controls=[];this.overlays=[];this.layers=[];this.singleLayers={};this.markers=[];this.polylines=[];this.routes=[];this.polygons=[];this.infoWindow=null;this.overlay_el=null;this.zoom=k.zoom;this.registered_events={};this.el.style.width=k.width||this.el.scrollWidth||this.el.offsetWidth;this.el.style.height=k.height||this.el.scrollHeight||this.el.offsetHeight;google.maps.visualRefresh=k.enableNewStyle;for(ah=0;ah<l.length;ah++){delete k[l[ah]]}if(k.disableDefaultUI!=true){aj=r(aj,al)}am=r(aj,k);for(ah=0;ah<ag.length;ah++){delete am[ag[ah]]}for(ah=0;ah<ae.length;ah++){delete am[ae[ah]]}this.map=new google.maps.Map(this.el,am);if(g){this.markerClusterer=g.apply(this,[this.map])}var aa=function(L,M){var z="",D=window.context_menu[V.el.id][L];for(var A in D){if(D.hasOwnProperty(A)){var C=D[A];z+='<li><a id="'+L+"_"+A+'" href="#">'+C.title+"</a></li>"}}if(!t("gmaps_context_menu")){return}var H=t("gmaps_context_menu");H.innerHTML=z;var J=H.getElementsByTagName("a"),K=J.length,A;for(A=0;A<K;A++){var I=J[A];var G=function(N){N.preventDefault();D[this.id.replace(L+"_","")].action.apply(V,[M]);V.hideContextMenu()};google.maps.event.clearListeners(I,"click");google.maps.event.addDomListenerOnce(I,"click",G,false)}var E=s.apply(this,[V.el]),B=E[0]+M.pixel.x-15,F=E[1]+M.pixel.y-15;H.style.left=B+"px";H.style.top=F+"px"};this.buildContextMenu=function(A,B){if(A==="marker"){B.pixel={};var C=new google.maps.OverlayView();C.setMap(V.map);C.draw=function(){var E=C.getProjection(),D=B.marker.getPosition();B.pixel=E.fromLatLngToContainerPixel(D);aa(A,B)}}else{aa(A,B)}var z=t("gmaps_context_menu");setTimeout(function(){z.style.display="block"},0)};this.setContextMenu=function(C){window.context_menu[V.el.id][C.control]={};var A,D=a.createElement("ul");for(A in C.options){if(C.options.hasOwnProperty(A)){var B=C.options[A];window.context_menu[V.el.id][C.control][B.name]={title:B.title,action:B.action}}}D.id="gmaps_context_menu";D.style.display="none";D.style.position="absolute";D.style.minWidth="100px";D.style.background="white";D.style.listStyle="none";D.style.padding="8px";D.style.boxShadow="2px 2px 6px #ccc";if(!t("gmaps_context_menu")){a.body.appendChild(D)}var z=t("gmaps_context_menu");google.maps.event.addDomListener(z,"mouseout",function(E){if(!E.relatedTarget||!this.contains(E.relatedTarget)){window.setTimeout(function(){z.style.display="none"},400)}},false)};this.hideContextMenu=function(){var z=t("gmaps_context_menu");if(z){z.style.display="none"}};var W=function(A,z){google.maps.event.addListener(A,z,function(B){if(B==undefined){B=this}k[z].apply(this,[B]);V.hideContextMenu()})};google.maps.event.addListener(this.map,"zoom_changed",this.hideContextMenu);for(var ac=0;ac<ag.length;ac++){var i=ag[ac];if(i in k){W(this.map,i)}}for(var ac=0;ac<ae.length;ac++){var i=ae[ac];if(i in k){W(this.map,i)}}google.maps.event.addListener(this.map,"rightclick",function(z){if(k.rightclick){k.rightclick.apply(this,[z])}if(window.context_menu[V.el.id]["map"]!=undefined){V.buildContextMenu("map",z)}});this.refresh=function(){google.maps.event.trigger(this.map,"resize")};this.fitZoom=function(){var A=[],B=this.markers.length,z;for(z=0;z<B;z++){if(typeof(this.markers[z].visible)==="boolean"&&this.markers[z].visible){A.push(this.markers[z].getPosition())}}this.fitLatLngBounds(A)};this.fitLatLngBounds=function(B){var C=B.length,z=new google.maps.LatLngBounds(),A;for(A=0;A<C;A++){z.extend(B[A])}this.map.fitBounds(z)};this.setCenter=function(A,B,z){this.map.panTo(new google.maps.LatLng(A,B));if(z){z()}};this.getElement=function(){return this.el};this.zoomIn=function(z){z=z||1;this.zoom=this.map.getZoom()+z;this.map.setZoom(this.zoom)};this.zoomOut=function(z){z=z||1;this.zoom=this.map.getZoom()-z;this.map.setZoom(this.zoom)};var j=[],h;for(h in this.map){if(typeof(this.map[h])=="function"&&!this[h]){j.push(h)}}for(ah=0;ah<j.length;ah++){(function(z,B,A){z[A]=function(){return B[A].apply(B,arguments)}})(this,this.map,j[ah])}};return c})(this);v.prototype.createControl=function(d){var a=document.createElement("div");a.style.cursor="pointer";if(d.disableDefaultStyles!==true){a.style.fontFamily="Roboto, Arial, sans-serif";a.style.fontSize="11px";a.style.boxShadow="rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px"}for(var c in d.style){a.style[c]=d.style[c]}if(d.id){a.id=d.id}if(d.title){a.title=d.title}if(d.classes){a.className=d.classes}if(d.content){if(typeof d.content==="string"){a.innerHTML=d.content}else{if(d.content instanceof HTMLElement){a.appendChild(d.content)}}}if(d.position){a.position=google.maps.ControlPosition[d.position.toUpperCase()]}for(var b in d.events){(function(g,f){google.maps.event.addDomListener(g,f,function(){d.events[f].apply(this,[this])})})(a,b)}a.index=1;return a};v.prototype.addControl=function(b){var a=this.createControl(b);this.controls.push(a);this.map.controls[a.position].push(a);return a};v.prototype.removeControl=function(a){var d=null,c;for(c=0;c<this.controls.length;c++){if(this.controls[c]==a){d=this.controls[c].position;this.controls.splice(c,1)}}if(d){for(c=0;c<this.map.controls.length;c++){var b=this.map.controls[a.position];if(b.getAt(c)==a){b.removeAt(c);break}}}return a};v.prototype.createMarker=function(k){if(k.lat==undefined&&k.lng==undefined&&k.position==undefined){throw"No latitude or longitude defined."}var m=this,b=k.details,d=k.fences,l=k.outside,a={position:new google.maps.LatLng(k.lat,k.lng),map:null},j=r(a,k);delete j.lat;delete j.lng;delete j.fences;delete j.outside;var g=new google.maps.Marker(j);g.fences=d;if(k.infoWindow){g.infoWindow=new google.maps.InfoWindow(k.infoWindow);var f=["closeclick","content_changed","domready","position_changed","zindex_changed"];for(var c=0;c<f.length;c++){(function(B,C){if(k.infoWindow[C]){google.maps.event.addListener(B,C,function(z){k.infoWindow[C].apply(this,[z])})}})(g.infoWindow,f[c])}}var h=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"];var i=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"];for(var c=0;c<h.length;c++){(function(B,C){if(k[C]){google.maps.event.addListener(B,C,function(){k[C].apply(this,[this])})}})(g,h[c])}for(var c=0;c<i.length;c++){(function(E,D,C){if(k[C]){google.maps.event.addListener(D,C,function(z){if(!z.pixel){z.pixel=E.getProjection().fromLatLngToPoint(z.latLng)}k[C].apply(this,[z])})}})(this.map,g,i[c])}google.maps.event.addListener(g,"click",function(){this.details=b;if(k.click){k.click.apply(this,[this])}if(g.infoWindow){m.hideInfoWindows();g.infoWindow.open(m.map,g)}});google.maps.event.addListener(g,"rightclick",function(A){A.marker=this;if(k.rightclick){k.rightclick.apply(this,[A])}if(window.context_menu[m.el.id]["marker"]!=undefined){m.buildContextMenu("marker",A)}});if(g.fences){google.maps.event.addListener(g,"dragend",function(){m.checkMarkerGeofence(g,function(B,C){l(B,C)})})}return g};v.prototype.addMarker=function(b){var a;if(b.hasOwnProperty("gm_accessors_")){a=b}else{if((b.hasOwnProperty("lat")&&b.hasOwnProperty("lng"))||b.position){a=this.createMarker(b)}else{throw"No latitude or longitude defined."}}a.setMap(this.map);if(this.markerClusterer){this.markerClusterer.addMarker(a)}this.markers.push(a);v.fire("marker_added",a,this);return a};v.prototype.addMarkers=function(a){for(var b=0,c;c=a[b];b++){this.addMarker(c)}return this.markers};v.prototype.hideInfoWindows=function(){for(var a=0,b;b=this.markers[a];a++){if(b.infoWindow){b.infoWindow.close()}}};v.prototype.removeMarker=function(b){for(var a=0;a<this.markers.length;a++){if(this.markers[a]===b){this.markers[a].setMap(null);this.markers.splice(a,1);if(this.markerClusterer){this.markerClusterer.removeMarker(b)}v.fire("marker_removed",b,this);break}}return b};v.prototype.removeMarkers=function(a){var f=[];if(typeof a=="undefined"){for(var b=0;b<this.markers.length;b++){var d=this.markers[b];d.setMap(null);v.fire("marker_removed",d,this)}if(this.markerClusterer&&this.markerClusterer.clearMarkers){this.markerClusterer.clearMarkers()}this.markers=f}else{for(var b=0;b<a.length;b++){var c=this.markers.indexOf(a[b]);if(c>-1){var d=this.markers[c];d.setMap(null);if(this.markerClusterer){this.markerClusterer.removeMarker(d)}v.fire("marker_removed",d,this)}}for(var b=0;b<this.markers.length;b++){var d=this.markers[b];if(d.getMap()!=null){f.push(d)}}this.markers=f}};v.prototype.drawOverlay=function(b){var c=new google.maps.OverlayView(),a=true;c.setMap(this.map);if(b.auto_show!=null){a=b.auto_show}c.onAdd=function(){var d=document.createElement("div");d.style.borderStyle="none";d.style.borderWidth="0px";d.style.position="absolute";d.style.zIndex=100;d.innerHTML=b.content;c.el=d;if(!b.layer){b.layer="overlayLayer"}var h=this.getPanes(),g=h[b.layer],i=["contextmenu","DOMMouseScroll","dblclick","mousedown"];g.appendChild(d);for(var f=0;f<i.length;f++){(function(k,j){google.maps.event.addDomListener(k,j,function(l){if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1&&document.all){l.cancelBubble=true;l.returnValue=false}else{l.stopPropagation()}})})(d,i[f])}if(b.click){h.overlayMouseTarget.appendChild(c.el);google.maps.event.addDomListener(c.el,"click",function(){b.click.apply(c,[c])})}google.maps.event.trigger(this,"ready")};c.draw=function(){var j=this.getProjection(),i=j.fromLatLngToDivPixel(new google.maps.LatLng(b.lat,b.lng));b.horizontalOffset=b.horizontalOffset||0;b.verticalOffset=b.verticalOffset||0;var h=c.el,d=h.children[0],f=d.clientHeight,g=d.clientWidth;switch(b.verticalAlign){case"top":h.style.top=(i.y-f+b.verticalOffset)+"px";break;default:case"middle":h.style.top=(i.y-(f/2)+b.verticalOffset)+"px";break;case"bottom":h.style.top=(i.y+b.verticalOffset)+"px";break}switch(b.horizontalAlign){case"left":h.style.left=(i.x-g+b.horizontalOffset)+"px";break;default:case"center":h.style.left=(i.x-(g/2)+b.horizontalOffset)+"px";break;case"right":h.style.left=(i.x+b.horizontalOffset)+"px";break}h.style.display=a?"block":"none";if(!a){b.show.apply(this,[h])}};c.onRemove=function(){var d=c.el;if(b.remove){b.remove.apply(this,[d])}else{c.el.parentNode.removeChild(c.el);c.el=null}};this.overlays.push(c);return c};v.prototype.removeOverlay=function(b){for(var a=0;a<this.overlays.length;a++){if(this.overlays[a]===b){this.overlays[a].setMap(null);this.overlays.splice(a,1);break}}};v.prototype.removeOverlays=function(){for(var a=0,b;b=this.overlays[a];a++){b.setMap(null)}this.overlays=[]};v.prototype.drawPolyline=function(d){var f=[],g=d.path;if(g.length){if(g[0][0]===undefined){f=g}else{for(var b=0,c;c=g[b];b++){f.push(new google.maps.LatLng(c[0],c[1]))}}}var j={map:this.map,path:f,strokeColor:d.strokeColor,strokeOpacity:d.strokeOpacity,strokeWeight:d.strokeWeight,geodesic:d.geodesic,clickable:true,editable:false,visible:true};if(d.hasOwnProperty("clickable")){j.clickable=d.clickable}if(d.hasOwnProperty("editable")){j.editable=d.editable}if(d.hasOwnProperty("icons")){j.icons=d.icons}if(d.hasOwnProperty("zIndex")){j.zIndex=d.zIndex}var h=new google.maps.Polyline(j);var i=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var a=0;a<i.length;a++){(function(l,k){if(d[k]){google.maps.event.addListener(l,k,function(m){d[k].apply(this,[m])})}})(h,i[a])}this.polylines.push(h);v.fire("polyline_added",h,this);return h};v.prototype.removePolyline=function(b){for(var a=0;a<this.polylines.length;a++){if(this.polylines[a]===b){this.polylines[a].setMap(null);this.polylines.splice(a,1);v.fire("polyline_removed",b,this);break}}};v.prototype.removePolylines=function(){for(var a=0,b;b=this.polylines[a];a++){b.setMap(null)}this.polylines=[]};v.prototype.drawCircle=function(b){b=r({map:this.map,center:new google.maps.LatLng(b.lat,b.lng)},b);delete b.lat;delete b.lng;var c=new google.maps.Circle(b),d=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var a=0;a<d.length;a++){(function(g,f){if(b[f]){google.maps.event.addListener(g,f,function(h){b[f].apply(this,[h])})}})(c,d[a])}this.polygons.push(c);return c};v.prototype.drawRectangle=function(c){c=r({map:this.map},c);var b=new google.maps.LatLngBounds(new google.maps.LatLng(c.bounds[0][0],c.bounds[0][1]),new google.maps.LatLng(c.bounds[1][0],c.bounds[1][1]));c.bounds=b;var d=new google.maps.Rectangle(c),f=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var a=0;a<f.length;a++){(function(h,g){if(c[g]){google.maps.event.addListener(h,g,function(i){c[g].apply(this,[i])})}})(d,f[a])}this.polygons.push(d);return d};v.prototype.drawPolygon=function(b){var f=false;if(b.hasOwnProperty("useGeoJSON")){f=b.useGeoJSON}delete b.useGeoJSON;b=r({map:this.map},b);if(f==false){b.paths=[b.paths.slice(0)]}if(b.paths.length>0){if(b.paths[0].length>0){b.paths=n(o(b.paths,p,f))}}var c=new google.maps.Polygon(b),d=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var a=0;a<d.length;a++){(function(h,g){if(b[g]){google.maps.event.addListener(h,g,function(i){b[g].apply(this,[i])})}})(c,d[a])}this.polygons.push(c);v.fire("polygon_added",c,this);return c};v.prototype.removePolygon=function(b){for(var a=0;a<this.polygons.length;a++){if(this.polygons[a]===b){this.polygons[a].setMap(null);this.polygons.splice(a,1);v.fire("polygon_removed",b,this);break}}};v.prototype.removePolygons=function(){for(var a=0,b;b=this.polygons[a];a++){b.setMap(null)}this.polygons=[]};v.prototype.getFromFusionTables=function(f){var b=f.events;delete f.events;var c=f,d=new google.maps.FusionTablesLayer(c);for(var a in b){(function(h,g){google.maps.event.addListener(h,g,function(i){b[g].apply(this,[i])})})(d,a)}this.layers.push(d);return d};v.prototype.loadFromFusionTables=function(b){var a=this.getFromFusionTables(b);a.setMap(this.map);return a};v.prototype.getFromKML=function(f){var g=f.url,b=f.events;delete f.url;delete f.events;var c=f,d=new google.maps.KmlLayer(g,c);for(var a in b){(function(i,h){google.maps.event.addListener(i,h,function(j){b[h].apply(this,[j])})})(d,a)}this.layers.push(d);return d};v.prototype.loadFromKML=function(b){var a=this.getFromKML(b);a.setMap(this.map);return a};v.prototype.addLayer=function(b,c){c=c||{};var a;switch(b){case"weather":this.singleLayers.weather=a=new google.maps.weather.WeatherLayer();break;case"clouds":this.singleLayers.clouds=a=new google.maps.weather.CloudLayer();break;case"traffic":this.singleLayers.traffic=a=new google.maps.TrafficLayer();break;case"transit":this.singleLayers.transit=a=new google.maps.TransitLayer();break;case"bicycling":this.singleLayers.bicycling=a=new google.maps.BicyclingLayer();break;case"panoramio":this.singleLayers.panoramio=a=new google.maps.panoramio.PanoramioLayer();a.setTag(c.filter);delete c.filter;if(c.click){google.maps.event.addListener(a,"click",function(g){c.click(g);delete c.click})}break;case"places":this.singleLayers.places=a=new google.maps.places.PlacesService(this.map);if(c.search||c.nearbySearch||c.radarSearch){var d={bounds:c.bounds||null,keyword:c.keyword||null,location:c.location||null,name:c.name||null,radius:c.radius||null,rankBy:c.rankBy||null,types:c.types||null};if(c.radarSearch){a.radarSearch(d,c.radarSearch)}if(c.search){a.search(d,c.search)}if(c.nearbySearch){a.nearbySearch(d,c.nearbySearch)}}if(c.textSearch){var f={bounds:c.bounds||null,location:c.location||null,query:c.query||null,radius:c.radius||null};a.textSearch(f,c.textSearch)}break}if(a!==undefined){if(typeof a.setOptions=="function"){a.setOptions(c)}if(typeof a.setMap=="function"){a.setMap(this.map)}return a}};v.prototype.removeLayer=function(b){if(typeof(b)=="string"&&this.singleLayers[b]!==undefined){this.singleLayers[b].setMap(null);delete this.singleLayers[b]}else{for(var a=0;a<this.layers.length;a++){if(this.layers[a]===b){this.layers[a].setMap(null);this.layers.splice(a,1);break}}}};var x,y;v.prototype.getRoutes=function(b){switch(b.travelMode){case"bicycling":x=google.maps.TravelMode.BICYCLING;break;case"transit":x=google.maps.TravelMode.TRANSIT;break;case"driving":x=google.maps.TravelMode.DRIVING;break;default:x=google.maps.TravelMode.WALKING;break}if(b.unitSystem==="imperial"){y=google.maps.UnitSystem.IMPERIAL}else{y=google.maps.UnitSystem.METRIC}var a={avoidHighways:false,avoidTolls:false,optimizeWaypoints:false,waypoints:[]},c=r(a,b);c.origin=/string/.test(typeof b.origin)?b.origin:new google.maps.LatLng(b.origin[0],b.origin[1]);c.destination=/string/.test(typeof b.destination)?b.destination:new google.maps.LatLng(b.destination[0],b.destination[1]);c.travelMode=x;c.unitSystem=y;delete c.callback;delete c.error;var f=this,d=[],g=new google.maps.DirectionsService();g.route(c,function(i,j){if(j===google.maps.DirectionsStatus.OK){for(var h in i.routes){if(i.routes.hasOwnProperty(h)){d.push(i.routes[h])}}if(b.callback){b.callback(d,i,j)}}else{if(b.error){b.error(i,j)}}})};v.prototype.removeRoutes=function(){this.routes.length=0};v.prototype.getElevations=function(b){b=r({locations:[],path:false,samples:256},b);if(b.locations.length>0){if(b.locations[0].length>0){b.locations=n(o([b.locations],p,false))}}var a=b.callback;delete b.callback;var d=new google.maps.ElevationService();if(!b.path){delete b.path;delete b.samples;d.getElevationForLocations(b,function(f,g){if(a&&typeof(a)==="function"){a(f,g)}})}else{var c={path:b.locations,samples:b.samples};d.getElevationAlongPath(c,function(f,g){if(a&&typeof(a)==="function"){a(f,g)}})}};v.prototype.cleanRoute=v.prototype.removePolylines;v.prototype.renderRoute=function(b,d){var f=this,c=((typeof d.panel==="string")?document.getElementById(d.panel.replace("#","")):d.panel),a;d.panel=c;d=r({map:this.map},d);a=new google.maps.DirectionsRenderer(d);this.getRoutes({origin:b.origin,destination:b.destination,travelMode:b.travelMode,waypoints:b.waypoints,unitSystem:b.unitSystem,error:b.error,avoidHighways:b.avoidHighways,avoidTolls:b.avoidTolls,optimizeWaypoints:b.optimizeWaypoints,callback:function(h,g,i){if(i===google.maps.DirectionsStatus.OK){a.setDirections(g)}}})};v.prototype.drawRoute=function(a){var b=this;this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,error:a.error,avoidHighways:a.avoidHighways,avoidTolls:a.avoidTolls,optimizeWaypoints:a.optimizeWaypoints,callback:function(d){if(d.length>0){var c={path:d[d.length-1].overview_path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};if(a.hasOwnProperty("icons")){c.icons=a.icons}b.drawPolyline(c);if(a.callback){a.callback(d[d.length-1])}}}})};v.prototype.travelRoute=function(b){if(b.origin&&b.destination){this.getRoutes({origin:b.origin,destination:b.destination,travelMode:b.travelMode,waypoints:b.waypoints,unitSystem:b.unitSystem,error:b.error,callback:function(f){if(f.length>0&&b.start){b.start(f[f.length-1])}if(f.length>0&&b.step){var h=f[f.length-1];if(h.legs.length>0){var j=h.legs[0].steps;for(var g=0,i;i=j[g];g++){i.step_number=g;b.step(i,(h.legs[0].steps.length-1))}}}if(f.length>0&&b.end){b.end(f[f.length-1])}}})}else{if(b.route){if(b.route.legs.length>0){var d=b.route.legs[0].steps;for(var a=0,c;c=d[a];a++){c.step_number=a;b.step(c)}}}}};v.prototype.drawSteppedRoute=function(b){var d=this;if(b.origin&&b.destination){this.getRoutes({origin:b.origin,destination:b.destination,travelMode:b.travelMode,waypoints:b.waypoints,error:b.error,callback:function(h){if(h.length>0&&b.start){b.start(h[h.length-1])}if(h.length>0&&b.step){var k=h[h.length-1];if(k.legs.length>0){var m=k.legs[0].steps;for(var i=0,l;l=m[i];i++){l.step_number=i;var j={path:l.path,strokeColor:b.strokeColor,strokeOpacity:b.strokeOpacity,strokeWeight:b.strokeWeight};if(b.hasOwnProperty("icons")){j.icons=b.icons}d.drawPolyline(j);b.step(l,(k.legs[0].steps.length-1))}}}if(h.length>0&&b.end){b.end(h[h.length-1])}}})}else{if(b.route){if(b.route.legs.length>0){var g=b.route.legs[0].steps;for(var a=0,f;f=g[a];a++){f.step_number=a;var c={path:f.path,strokeColor:b.strokeColor,strokeOpacity:b.strokeOpacity,strokeWeight:b.strokeWeight};if(b.hasOwnProperty("icons")){c.icons=b.icons}d.drawPolyline(c);b.step(f)}}}}};v.Route=function(a){this.origin=a.origin;this.destination=a.destination;this.waypoints=a.waypoints;this.map=a.map;this.route=a.route;this.step_count=0;this.steps=this.route.legs[0].steps;this.steps_length=this.steps.length;var b={path:new google.maps.MVCArray(),strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};if(a.hasOwnProperty("icons")){b.icons=a.icons}this.polyline=this.map.drawPolyline(b).getPath()};v.Route.prototype.getRoute=function(a){var b=this;this.map.getRoutes({origin:this.origin,destination:this.destination,travelMode:a.travelMode,waypoints:this.waypoints||[],error:a.error,callback:function(){b.route=e[0];if(a.callback){a.callback.call(b)}}})};v.Route.prototype.back=function(){if(this.step_count>0){this.step_count--;var b=this.route.legs[0].steps[this.step_count].path;for(var a in b){if(b.hasOwnProperty(a)){this.polyline.pop()}}}};v.Route.prototype.forward=function(){if(this.step_count<this.steps_length){var b=this.route.legs[0].steps[this.step_count].path;for(var a in b){if(b.hasOwnProperty(a)){this.polyline.push(b[a])}}this.step_count++}};v.prototype.checkGeofence=function(b,c,a){return a.containsLatLng(new google.maps.LatLng(b,c))};v.prototype.checkMarkerGeofence=function(c,d){if(c.fences){for(var b=0,a;a=c.fences[b];b++){var f=c.getPosition();if(!this.checkGeofence(f.lat(),f.lng(),a)){d(c,a)}}}};v.prototype.toImage=function(b){var b=b||{},d={};d.size=b.size||[this.el.clientWidth,this.el.clientHeight];d.lat=this.getCenter().lat();d.lng=this.getCenter().lng();if(this.markers.length>0){d.markers=[];for(var a=0;a<this.markers.length;a++){d.markers.push({lat:this.markers[a].getPosition().lat(),lng:this.markers[a].getPosition().lng()})}}if(this.polylines.length>0){var c=this.polylines[0];d.polyline={};d.polyline.path=google.maps.geometry.encoding.encodePath(c.getPath());d.polyline.strokeColor=c.strokeColor;d.polyline.strokeOpacity=c.strokeOpacity;d.polyline.strokeWeight=c.strokeWeight}return v.staticMapURL(d)};v.staticMapURL=function(X){var a=[],P,k=(location.protocol==="file:"?"http:":location.protocol)+"//maps.googleapis.com/maps/api/staticmap";if(X.url){k=X.url;delete X.url}k+="?";var W=X.markers;delete X.markers;if(!W&&X.marker){W=[X.marker];delete X.marker}var m=X.styles;delete X.styles;var d=X.polyline;delete X.polyline;if(X.center){a.push("center="+X.center);delete X.center}else{if(X.address){a.push("center="+X.address);delete X.address}else{if(X.lat){a.push(["center=",X.lat,",",X.lng].join(""));delete X.lat;delete X.lng}else{if(X.visible){var N=encodeURI(X.visible.join("|"));a.push("visible="+N)}}}}var j=X.size;if(j){if(j.join){j=j.join("x")}delete X.size}else{j="630x300"}a.push("size="+j);if(!X.zoom&&X.zoom!==false){X.zoom=15}var i=X.hasOwnProperty("sensor")?!!X.sensor:true;delete X.sensor;a.push("sensor="+i);for(var Z in X){if(X.hasOwnProperty(Z)){a.push(Z+"="+X[Z])}}if(W){var V,U;for(var S=0;P=W[S];S++){V=[];if(P.size&&P.size!=="normal"){V.push("size:"+P.size);delete P.size}else{if(P.icon){V.push("icon:"+encodeURI(P.icon));delete P.icon}}if(P.color){V.push("color:"+P.color.replace("#","0x"));delete P.color}if(P.label){V.push("label:"+P.label[0].toUpperCase());delete P.label}U=(P.address?P.address:P.lat+","+P.lng);delete P.address;delete P.lat;delete P.lng;for(var Z in P){if(P.hasOwnProperty(Z)){V.push(Z+":"+P[Z])}}if(V.length||S===0){V.push(U);V=V.join("|");a.push("markers="+encodeURI(V))}else{V=a.pop()+encodeURI("|"+U);a.push(V)}}}if(m){for(var S=0;S<m.length;S++){var l=[];if(m[S].featureType){l.push("feature:"+m[S].featureType.toLowerCase())}if(m[S].elementType){l.push("element:"+m[S].elementType.toLowerCase())}for(var T=0;T<m[S].stylers.length;T++){for(var Y in m[S].stylers[T]){var h=m[S].stylers[T][Y];if(Y=="hue"||Y=="color"){h="0x"+h.substring(1)}l.push(Y+":"+h)}}var g=l.join("|");if(g!=""){a.push("style="+g)}}}function b(A,z){if(A[0]==="#"){A=A.replace("#","0x");if(z){z=parseFloat(z);z=Math.min(1,Math.max(z,0));if(z===0){return"0x00000000"}z=(z*255).toString(16);if(z.length===1){z+=z}A=A.slice(0,8)+z}}return A}if(d){P=d;d=[];if(P.strokeWeight){d.push("weight:"+parseInt(P.strokeWeight,10))}if(P.strokeColor){var O=b(P.strokeColor,P.strokeOpacity);d.push("color:"+O)}if(P.fillColor){var R=b(P.fillColor,P.fillOpacity);d.push("fillcolor:"+R)}var c=P.path;if(c.join){for(var T=0,f;f=c[T];T++){d.push(f.join(","))}}else{d.push("enc:"+c)}d=d.join("|");a.push("path="+encodeURI(d))}var Q=window.devicePixelRatio||1;a.push("scale="+Q);a=a.join("&");return k+a};v.prototype.addMapType=function(b,c){if(c.hasOwnProperty("getTileUrl")&&typeof(c.getTileUrl)=="function"){c.tileSize=c.tileSize||new google.maps.Size(256,256);var a=new google.maps.ImageMapType(c);this.map.mapTypes.set(b,a)}else{throw"'getTileUrl' function required."}};v.prototype.addOverlayMapType=function(a){if(a.hasOwnProperty("getTile")&&typeof(a.getTile)=="function"){var b=a.index;delete a.index;this.map.overlayMapTypes.insertAt(b,a)}else{throw"'getTile' function required."}};v.prototype.removeOverlayMapType=function(a){this.map.overlayMapTypes.removeAt(a)};v.prototype.addStyle=function(a){var b=new google.maps.StyledMapType(a.styles,{name:a.styledMapName});this.map.mapTypes.set(a.mapTypeId,b)};v.prototype.setStyle=function(a){this.map.setMapTypeId(a)};v.prototype.createPanorama=function(a){if(!a.hasOwnProperty("lat")||!a.hasOwnProperty("lng")){a.lat=this.getCenter().lat();a.lng=this.getCenter().lng()}this.panorama=v.createPanorama(a);this.map.setStreetView(this.panorama);return this.panorama};v.createPanorama=function(c){var a=t(c.el,c.context);c.position=new google.maps.LatLng(c.lat,c.lng);delete c.el;delete c.context;delete c.lat;delete c.lng;var f=["closeclick","links_changed","pano_changed","position_changed","pov_changed","resize","visible_changed"],g=r({visible:true},c);for(var b=0;b<f.length;b++){delete g[f[b]]}var d=new google.maps.StreetViewPanorama(a,g);for(var b=0;b<f.length;b++){(function(i,h){if(c[h]){google.maps.event.addListener(i,h,function(){c[h].apply(this)})}})(d,f[b])}return d};v.prototype.on=function(a,b){return v.on(a,this,b)};v.prototype.off=function(a){v.off(a,this)};v.prototype.once=function(a,b){return v.once(a,this,b)};v.custom_events=["marker_added","marker_removed","polyline_added","polyline_removed","polygon_added","polygon_removed","geolocated","geolocation_failed"];v.on=function(a,c,b){if(v.custom_events.indexOf(a)==-1){if(c instanceof v){c=c.map}return google.maps.event.addListener(c,a,b)}else{var d={handler:b,eventName:a};c.registered_events[a]=c.registered_events[a]||[];c.registered_events[a].push(d);return d}};v.off=function(a,b){if(v.custom_events.indexOf(a)==-1){if(b instanceof v){b=b.map}google.maps.event.clearListeners(b,a)}else{b.registered_events[a]=[]}};v.once=function(a,c,b){if(v.custom_events.indexOf(a)==-1){if(c instanceof v){c=c.map}return google.maps.event.addListenerOnce(c,a,b)}};v.fire=function(a,d,f){if(v.custom_events.indexOf(a)==-1){google.maps.event.trigger(d,a,Array.prototype.slice.apply(arguments).slice(2))}else{if(a in f.registered_events){var b=f.registered_events[a];for(var c=0;c<b.length;c++){(function(g,i,h){g.apply(i,[h])})(b[c]["handler"],f,d)}}}};v.geolocate=function(b){var a=b.always||b.complete;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(c){b.success(c);if(a){a()}},function(c){b.error(c);if(a){a()}},b.options)}else{b.not_supported();if(a){a()}}};v.geocode=function(b){this.geocoder=new google.maps.Geocoder();var a=b.callback;if(b.hasOwnProperty("lat")&&b.hasOwnProperty("lng")){b.latLng=new google.maps.LatLng(b.lat,b.lng)}delete b.lat;delete b.lng;delete b.callback;this.geocoder.geocode(b,function(c,d){a(c,d)})};if(typeof window.google==="object"&&window.google.maps){if(!google.maps.Polygon.prototype.getBounds){google.maps.Polygon.prototype.getBounds=function(c){var a=new google.maps.LatLngBounds();var g=this.getPaths();var f;for(var d=0;d<g.getLength();d++){f=g.getAt(d);for(var b=0;b<f.getLength();b++){a.extend(f.getAt(b))}}return a}}if(!google.maps.Polygon.prototype.containsLatLng){google.maps.Polygon.prototype.containsLatLng=function(f){var a=this.getBounds();if(a!==null&&!a.contains(f)){return false}var c=false;var g=this.getPaths().getLength();for(var i=0;i<g;i++){var j=this.getPaths().getAt(i);var h=j.getLength();var d=h-1;for(var b=0;b<h;b++){var k=j.getAt(b);var l=j.getAt(d);if(k.lng()<f.lng()&&l.lng()>=f.lng()||l.lng()<f.lng()&&k.lng()>=f.lng()){if(k.lat()+(f.lng()-k.lng())/(l.lng()-k.lng())*(l.lat()-k.lat())<f.lat()){c=!c}}d=b}}return c}}if(!google.maps.Circle.prototype.containsLatLng){google.maps.Circle.prototype.containsLatLng=function(a){if(google.maps.geometry){return google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(),a)<=this.getRadius()}else{return true}}}google.maps.Rectangle.prototype.containsLatLng=function(a){return this.getBounds().contains(a)};google.maps.LatLngBounds.prototype.containsLatLng=function(a){return this.contains(a)};google.maps.Marker.prototype.setFences=function(a){this.fences=a};google.maps.Marker.prototype.addFence=function(a){this.fences.push(a)};google.maps.Marker.prototype.getId=function(){return this["__gm_id"]}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(d){if(this==null){throw new TypeError()}var f=Object(this);var b=f.length>>>0;if(b===0){return -1}var c=0;if(arguments.length>1){c=Number(arguments[1]);if(c!=c){c=0}else{if(c!=0&&c!=Infinity&&c!=-Infinity){c=(c>0||-1)*Math.floor(Math.abs(c))}}}if(c>=b){return -1}var a=c>=0?c:Math.max(b-Math.abs(c),0);for(;a<b;a++){if(a in f&&f[a]===d){return a}}return -1}}return v}));